<app-header-user-dashboard></app-header-user-dashboard>

<div>
<div class="userprofile" *ngIf="person">
  <div class="wrap" >
    <div class="userwrap">
      <div class="profile">
        <img src="../../assets/irfan.jpg" alt="user-image">
        <div class="name">
          <h3>{{person.firstName}} {{person.lastName}}</h3>
        </div>
      </div>
      <div class="info">
        <p>Basic contact information:</p>
        <hr>
        <p>E-mail: {{person.email}}</p>
        <p>Contact number: {{person.phone}}</p>
      </div>
    </div>

    <div class="update-profile">
      <h5>Make changes to your profile</h5>
      <div class="form-text" style="color: red">Email must be entered every time!</div>
      <hr>
      <form [formGroup]="form" (ngSubmit)="submit(person.id)">
        <div class="mustinput">
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">E-mail address:</label>
            <input formControlName="email" type="email" class="form-control" id="exampleInputEmail1" [ngClass]="{'is-invalid' : emailupdate && emailupdate.invalid && emailupdate.touched}" aria-describedby="basic-addon1" placeholder="{{person.email}}">
          </div>
        </div>
        <div class="inputvalues">
          <div class="mb-3">
            <label for="exampleInputFname" class="form-label">First name:</label>
            <input  formControlName="firstName"   type="text" class="form-control" id="exampleInputFname" placeholder="{{person.firstName}}">
          </div>
          <div class="mb-3">
            <label for="exampleInputLname" class="form-label">Last name:</label>
            <input formControlName="lastName" type="text" class="form-control" id="exampleInputLname" placeholder="{{person.lastName}}">
          </div>
          <div class="mb-3">
            <label for="exampleInputContact" class="form-label">Contact number:</label>
            <input formControlName="phone" type="phone" class="form-control" id="exampleInputContact" placeholder="{{person.phone}}">
          </div>
          <button [disabled]="form.invalid" type="submit" class="btn btn-success">Update profile</button>
        </div>
      </form>
    </div>


    <div class="previous-reservations">
      <div class="reservations-group" style="background-color: rgba(240,182,127,0.2)">
        <h5 style="color: #395B7E">Previous Reservations </h5>
        <hr>
        <div *ngFor="let reservation of reservations" class="reservation-wrap">
          <div  class="reservation-block">
            <div>
              <p> <span>UserID:</span> {{reservation.user.id}}</p>
              <p> <span>RestaurantID:</span> {{reservation.restaurant.id}}</p>
              <p> <span>Time:</span> {{reservation.time}}</p>
              <p> <span>Date:</span> {{reservation.date}}</p>
              <p> <span>Number of guests:</span> {{reservation.numberOfGuests}}</p>
              <p> <span>Table ID:</span> {{reservation.tableId}}</p>
            </div>
            <div class="confirmation">
              <div style="width: 200px">
                <p> <span>Reservation ID:</span> {{reservation.id}}</p>
                <p> <span>Approval status:</span> <br> <span style="color: #3e8e41!important; text-transform: uppercase"> {{reservation.approval}}</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
